const API_URL_BASE = "https://e2payments.explicador.co.mz/v1/";

const mpesa = {
  auth: "Bearer Ibh+QM87wz23/sY0bmFj/rAI5gGX8LpthgbCxKpPCailsLNIrIqn3Z38KCAVoQxt6JsllYRkYzYpuCExktEA5+zwCEAk+S/qEJ4LNeYqynQeO8QofCeePv7wUovoXoCoOeU1oyxTMnjDPScTEQpfV4IP2lpVUM9+Y97/zjvZq3tz5yVtgWsHistjlGrX8OWIdjTCTVEzqji6mAVNEGFZGaFCdihsXSLhOOOTJY0spAf6jSHOrDEUQzN6nTDyGF2Vr8i1TotUTnuBhrle9v79Uh/OLN8cI4Erhw0N13u1c0HCDin8gXN3nacXvaw4R2CqDRzbCcazGXeVO/sTWe65D2VeCBnrOMR4rrQ9Qc6esNP8u/PxqWDd6iJI3FFuExSyejWOWNlFU2Cke69AJhmgwWFDAci5/xzoadgkLx02uPlLe9K4PldFiAil8JKvY4ishJuYgZNQ43Il/uNKFRM9BKxXzYS/9MQwNN/nJjZFWIOnyKb4O7ecjIisXo2tEwWDNb90x2qG7MQNCK7ph+DZ/AaYHOG6UBH1EkxuGak/6wqwqKtss1JugmQ4S1LzlkzBbdH7ugPdRPMStvZUoaUvaOuNSM16sD++IjVA11JzLQr6gzFRkh9aYVscPJP+jir+VyfAwYunESKUZ38LGbTL2OTx07nk7LS0cCrZMrPDYLo=",
  c2b: {
    baseUrl: "https://api.sandbox.vm.co.mz:18352/",
    input_TransactionReference: "T12344C",
    input_ThirdPartyReference: "CICA7",
    input_serviceProviderCode: "171717",
    origin: "developer.mpesa.vm.co.mz",
  },
};
const user = {
  grant_type: "client_credentials",
  client_id: "9aaccec4-5932-42c8-9170-13727d568f1f ",
  client_secret: "vKeg70XiXSE9Gx2CfVnccxCGUKq6BV3aYadwhHcO",
};

app.get("/pagamento", async (req, res) => {
  try {
    console.log(user);
    const token = await axios.post(
      "https://e2payments.explicador.co.mz/oauth/token",
      user
    );
    console.log(token.data);

    res
      .cookie("access_token", token.data.access_token, { httpOnly: true })
      .send("token guardado");
  } catch (error) {
    console.log(error);
    res.status(400).send(error.message);
  }
});
